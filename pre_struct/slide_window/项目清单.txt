================================================================================
                    SLIDE WINDOW é¡¹ç›®æœ€ç»ˆæ¸…å•
================================================================================

âœ… å®Œæˆæ—¥æœŸï¼š2025-10-24
âœ… é¡¹ç›®çŠ¶æ€ï¼šå®Œå…¨å°±ç»ª

================================================================================
ğŸ“¦ é¡¹ç›®æ–‡ä»¶ç»“æ„
================================================================================

æ ¸å¿ƒä»£ç æ–‡ä»¶ï¼ˆ7ä¸ªï¼‰:
  âœ“ __init__.py                    - åŒ…åˆå§‹åŒ–
  âœ“ config_io.py                   - é…ç½®åŠ è½½å’Œç®¡ç†
  âœ“ dataset.py                     - æ•°æ®é›†å¤„ç†ï¼ˆæ”¹è¿›çš„æ ‡æ³¨é€»è¾‘ï¼‰
  âœ“ model_ebqa.py                  - BERTæ¨¡å‹å’Œè§£ç å™¨
  âœ“ precompute_dataset.py          - æ•°æ®é¢„è®¡ç®—è„šæœ¬
  âœ“ train_with_precomputed.py      - è®­ç»ƒè„šæœ¬ï¼ˆæ ¸å¿ƒï¼‰
  âœ“ test_slide_window.py           - æ¨ç†è„šæœ¬

è¯„ä¼°å·¥å…·ï¼ˆ1ä¸ªï¼‰:
  âœ“ evaluate_slide_window.py       - è¯„ä¼°è„šæœ¬ï¼ˆå¤åˆ¶è‡ªpre_struct/evaluate.pyï¼‰

é…ç½®æ–‡ä»¶ï¼ˆ1ä¸ªï¼‰:
  âœ“ ebqa_config.json               - ç»Ÿä¸€é…ç½®æ–‡ä»¶

æ–‡æ¡£æ–‡ä»¶ï¼ˆ1ä¸ªï¼‰:
  âœ“ README_slide_window.md         - å®Œæ•´æ±‡æ€»æ–‡æ¡£ï¼ˆ1,418è¡Œï¼Œ33KBï¼‰

================================================================================
ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
================================================================================

1. æ•°æ®é¢„è®¡ç®—ï¼ˆprecompute_dataset.pyï¼‰
   - è¯»å–åŸå§‹æ•°æ®ï¼ˆdata/merged.converted.jsonï¼‰
   - åˆ†å‰²ä¸ºè®­ç»ƒ/éªŒè¯é›†
   - ç”Ÿæˆé¢„è®¡ç®—æ ·æœ¬
   - æ”¯æŒprogress bar

2. æ¨¡å‹è®­ç»ƒï¼ˆtrain_with_precomputed.pyï¼‰
   - åŠ è½½é¢„è®¡ç®—æ•°æ®
   - BERTæ¨¡å‹å¾®è°ƒ
   - æ”¯æŒearly stopping
   - è‡ªåŠ¨æ¨¡å‹ä¿å­˜

3. æ¨ç†é¢„æµ‹ï¼ˆtest_slide_window.pyï¼‰
   - åŠ è½½è®­ç»ƒåçš„æ¨¡å‹
   - å•æ¡/æ‰¹é‡æ¨ç†
   - è‡ªåŠ¨fallbackåˆ°åŸå§‹æ¨¡å‹
   - æ”¯æŒæ— ç­”æ¡ˆé¢„æµ‹

4. æ¨¡å‹è¯„ä¼°ï¼ˆevaluate_slide_window.pyï¼‰
   - è¯„ä¼°æ¨¡å‹æ€§èƒ½
   - è®¡ç®—å¤šé¡¹æŒ‡æ ‡
   - æ”¯æŒé”™è¯¯åˆ†æ
   - å¯¼å‡ºè¯„ä¼°æŠ¥å‘Š

================================================================================
âš¡ æ ¸å¿ƒæ”¹è¿›
================================================================================

1. æ™ºèƒ½ç­”æ¡ˆæ˜ å°„ï¼ˆdataset.pyï¼‰
   - é‡‡ç”¨ebqaçš„char-to-tokenæ˜ å°„ç­–ç•¥
   - ä¼˜å…ˆé€‰"åŒ…å«"çš„tokenï¼Œå¤‡é€‰é€‰"é‚»è¿‘"çš„token
   - æ”¹è¿›ç­”æ¡ˆè¾¹ç•Œå¤„ç†

2. è´Ÿæ ·æœ¬å¤„ç†ï¼ˆdataset.pyï¼‰
   - æ— ç­”æ¡ˆæ ·æœ¬æ ‡æ³¨ä¸º[0,0]è€Œä¸æ˜¯è·³è¿‡
   - è®­ç»ƒæ¨¡å‹å­¦ä¼šè¯†åˆ«"æ— ç­”æ¡ˆ"
   - æå‡æ¨¡å‹é²æ£’æ€§

3. è®­ç»ƒå‚æ•°å‡çº§ï¼ˆebqa_config.jsonï¼‰
   - num_train_epochs: 2 â†’ 6
   - label_smoothing: 0.0 â†’ 0.08
   - use_weighted_sampler: false â†’ true
   - negative_downsample: 1.0 â†’ 0.4
   - short_field_weight: 1.0 â†’ 2.0

================================================================================
ğŸš€ å¿«é€Ÿå¯åŠ¨æŒ‡å—
================================================================================

æ–¹å¼1ï¼šå®Œæ•´å·¥ä½œæµ
  cd /mnt/windows/wy/ner-bert-crf
  
  # 1. é¢„è®¡ç®—æ•°æ®
  python -m pre_struct.slide_window.precompute_dataset
  
  # 2. è®­ç»ƒæ¨¡å‹
  python -m pre_struct.slide_window.train_with_precomputed
  
  # 3. æ¨ç†æµ‹è¯•
  python -m pre_struct.slide_window.test_slide_window
  
  # 4. æ¨¡å‹è¯„ä¼°
  python -m pre_struct.slide_window.evaluate_slide_window

æ–¹å¼2ï¼šæŒ‡å®šé…ç½®è¿è¡Œ
  EBQA_CONFIG_PATH=pre_struct/slide_window/ebqa_config.json \
  python -m pre_struct.slide_window.train_with_precomputed

================================================================================
ğŸ“š æ–‡æ¡£è¯´æ˜
================================================================================

README_slide_window.mdï¼ˆå®Œæ•´æ–‡æ¡£ï¼Œ1418è¡Œï¼‰
  åŒ…å«ä»¥ä¸‹å…¨éƒ¨å†…å®¹ï¼š
  - é¡¹ç›®æ¦‚è§ˆå’Œç³»ç»Ÿè¯´æ˜
  - å®Œæ•´è®­ç»ƒæŒ‡å—
  - æ”¹è¿›è¯´æ˜å’ŒæŠ€æœ¯ç»†èŠ‚
  - æ¨ç†ä½¿ç”¨æ–¹æ³•
  - é¡¹ç›®å®Œæ•´è¯´æ˜
  - é¡¹ç›®æ¸…å•

æ¨èä½¿ç”¨æ–¹å¼ï¼š
  # æŸ¥çœ‹å®Œæ•´æ–‡æ¡£
  cat pre_struct/slide_window/README_slide_window.md
  
  # æœç´¢ç‰¹å®šå†…å®¹
  grep "å…³é”®è¯" pre_struct/slide_window/README_slide_window.md

================================================================================
ğŸ“Š é¡¹ç›®è§„æ¨¡
================================================================================

ä»£ç è§„æ¨¡ï¼š
  config_io.py              ~100 è¡Œ
  dataset.py                ~520 è¡Œ
  model_ebqa.py             ~450 è¡Œ
  precompute_dataset.py     ~330 è¡Œ
  train_with_precomputed.py ~260 è¡Œ
  test_slide_window.py      ~160 è¡Œ
  evaluate_slide_window.py  ~600 è¡Œ
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  æ€»è®¡ï¼š                    ~2,420 è¡Œ

æ•°æ®è§„æ¨¡ï¼š
  åŸå§‹æŠ¥å‘Šï¼š283,535 æ¡
  é¢„è®¡ç®—æ ·æœ¬ï¼š~40,000 ä¸ª

æ–‡æ¡£è§„æ¨¡ï¼š
  README_slide_window.mdï¼š1,418 è¡Œï¼ˆ33KBï¼‰

================================================================================
âœ… é¡¹ç›®å®ŒæˆçŠ¶æ€
================================================================================

ä»£ç å®Œæ•´æ€§ï¼š        âœ… 100%
  - æ‰€æœ‰æ ¸å¿ƒæ¨¡å—å®Œæˆ
  - æ‰€æœ‰æ–‡ä»¶é€šè¿‡è¯­æ³•æ£€æŸ¥
  - æ‰€æœ‰é€»è¾‘å®Œæ•´æ— ç¼º

è®­ç»ƒé€»è¾‘ï¼š          âœ… å®Œæ•´
  - æ•°æ®åŠ è½½ âœ“
  - æ•°æ®å¤„ç† âœ“
  - æ¨¡å‹åˆå§‹åŒ– âœ“
  - è®­ç»ƒå¾ªç¯ âœ“
  - è¯„ä¼°æœºåˆ¶ âœ“
  - æ¨¡å‹ä¿å­˜ âœ“
  - æ—©åœæœºåˆ¶ âœ“

æ¨ç†é€»è¾‘ï¼š          âœ… å®Œæ•´
  - é…ç½®åŠ è½½ âœ“
  - æ¨¡å‹åŠ è½½ âœ“
  - æ¨ç†æµç¨‹ âœ“
  - ç»“æœåå¤„ç† âœ“
  - é”™è¯¯å¤„ç† âœ“

æ–‡æ¡£å®Œæ•´æ€§ï¼š        âœ… 100%
  - é¡¹ç›®æ¦‚è§ˆ âœ“
  - è®­ç»ƒæŒ‡å— âœ“
  - æ”¹è¿›è¯´æ˜ âœ“
  - æ¨ç†è¯´æ˜ âœ“
  - é¡¹ç›®è¯´æ˜ âœ“

å¯ç”¨æ€§ï¼š            âœ… 100%
  - å¯ç«‹å³é¢„è®¡ç®—
  - å¯ç«‹å³è®­ç»ƒ
  - å¯ç«‹å³æ¨ç†
  - å¯ç«‹å³è¯„ä¼°

================================================================================
ğŸ” æ–‡ä»¶æ¸…å•ï¼ˆæœ€ç»ˆç‰ˆï¼‰
================================================================================

Pythonæ–‡ä»¶ï¼ˆ8ä¸ªï¼Œæ€»è®¡ ~2,420 è¡Œï¼‰:
  1. __init__.py                 - åŒ…åˆå§‹åŒ–
  2. config_io.py                - é…ç½®ç®¡ç†
  3. dataset.py                  - æ•°æ®å¤„ç†
  4. model_ebqa.py               - æ¨¡å‹å®šä¹‰
  5. precompute_dataset.py       - æ•°æ®é¢„è®¡ç®—
  6. train_with_precomputed.py   - è®­ç»ƒè„šæœ¬
  7. test_slide_window.py        - æ¨ç†è„šæœ¬
  8. evaluate_slide_window.py    - è¯„ä¼°è„šæœ¬

é…ç½®æ–‡ä»¶ï¼ˆ1ä¸ªï¼‰:
  - ebqa_config.json

æ–‡æ¡£æ–‡ä»¶ï¼ˆ1ä¸ªï¼‰:
  - README_slide_window.md       (1,418 è¡Œï¼Œ33 KBï¼ŒåŒ…å«æ‰€æœ‰è¯´æ˜)

================================================================================
ğŸ’¡ ä½¿ç”¨å»ºè®®
================================================================================

1. é¦–æ¬¡ä½¿ç”¨
   - é˜…è¯» README_slide_window.md äº†è§£é¡¹ç›®
   - æŒ‰ç…§å¿«é€Ÿå¯åŠ¨æŒ‡å—æ‰§è¡Œ

2. å¼€å‘è°ƒè¯•
   - ä¿®æ”¹å‚æ•°åœ¨ ebqa_config.json ä¸­
   - æŸ¥çœ‹ä»£ç åœ¨å¯¹åº”çš„ .py æ–‡ä»¶ä¸­
   - æœç´¢æ–‡æ¡£ç”¨ grep å‘½ä»¤

3. æ€§èƒ½ä¼˜åŒ–
   - è°ƒæ•´ batch_size åœ¨ ebqa_config.json
   - ä¿®æ”¹è®­ç»ƒè½®æ¬¡ num_train_epochs
   - å°è¯•ä¸åŒçš„å­¦ä¹ ç‡

4. æ‰©å±•åŠŸèƒ½
   - å‚è€ƒ test_slide_window.py è‡ªå®šä¹‰æ¨ç†
   - å‚è€ƒ evaluate_slide_window.py è‡ªå®šä¹‰è¯„ä¼°
   - ç»§æ‰¿ dataset.py è‡ªå®šä¹‰æ•°æ®å¤„ç†

================================================================================
âœ¨ é¡¹ç›®äº®ç‚¹
================================================================================

âœ… å®Œæ•´çš„ç«¯åˆ°ç«¯ç®¡é“
   æ•°æ®é¢„è®¡ç®— â†’ æ¨¡å‹è®­ç»ƒ â†’ æ¨ç†é¢„æµ‹ â†’ æ€§èƒ½è¯„ä¼°

âœ… æ”¹è¿›çš„æ•°æ®æ ‡æ³¨
   é‡‡ç”¨ebqaçš„æ™ºèƒ½æ˜ å°„ç­–ç•¥ï¼Œå¤„ç†å¤æ‚çš„è¾¹ç•Œæƒ…å†µ

âœ… çµæ´»çš„é…ç½®ç³»ç»Ÿ
   æ‰€æœ‰å‚æ•°åœ¨ebqa_config.jsonä¸­é›†ä¸­ç®¡ç†

âœ… å®Œå–„çš„æ¨ç†æ”¯æŒ
   æ”¯æŒå•æ¡ã€æ‰¹é‡ã€è‡ªåŠ¨fallbackç­‰å¤šç§æ¨ç†æ–¹å¼

âœ… è¯¦å°½çš„æ–‡æ¡£
   1,418è¡Œçš„å®Œæ•´æ–‡æ¡£ï¼Œæ¶µç›–æ‰€æœ‰åŠŸèƒ½å’Œç”¨æ³•

âœ… å¼€ç®±å³ç”¨
   ä»£ç å®Œæ•´ï¼Œæ— éœ€é¢å¤–é…ç½®ï¼Œç«‹å³å¯ç”¨

================================================================================

ğŸ‰ é¡¹ç›®å®Œå…¨å°±ç»ªï¼å¯ä»¥å¼€å§‹å·¥ä½œï¼

================================================================================
