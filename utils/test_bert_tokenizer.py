#!/usr/bin/env python3
"""
BERT分词工具使用示例
"""

import subprocess

def main():
    # 示例文本
    test_texts = [
        "唐山市肿瘤医院 入院记录 病案号：526814 姓名：李君君 性别：女 年龄：40岁 科室：乳腺外一科 姓名:李君君 出生地：河北省唐山市 性别：女 现住址：河北省唐山市唐海县 年龄：40岁 工作单位：无 婚姻：离婚 入院时间：2024-10-2309：59 民族：汉族 记录时间：2024-10-2310：11 职业：其他 病史叙述者：李君君 与患者关系：本人 主诉：左乳腺癌术后7年余，可疑肺转移1月，可疑肝转移、骨转移5天。 现病史：患者于7年余前于我院因“左乳腺癌”行“左乳腺癌保乳术+左腋下前哨淋巴结活 检术”，术后行TC化疗4周期，化疗后行放疗，并予“托瑞米芬+戈舍瑞林”后改为“阿那曲唑 +亮丙瑞林”内分泌治疗共6年余，近1年内未规律服药。1月前常规复查时发现可疑肺转移，未 予处理，5天前行PET-CT检查发现可疑多发淋巴结转移、肝转移、骨转移，现为求进一步治疗 就诊于我院，门诊以“乳房恶性肿瘤”收入院。。 发病以来精神好，睡眠好，食欲正常，大便正常，体重无变化。 既往史：曾患疾病“左乳腺癌”术后7年余。无肝炎、无结核、无伤寒等传染病史及地方 病及其他疾病。预防接种史不详。无外伤史、有手术史、无输血史、无药物过敏史、无食物和 其他接触过敏史等。 个人史：出生于唐山市，久居于河北省唐山市唐海县，无疫区居住史，无烟、酒、药物、 麻醉毒品等嗜好，无工业毒物、粉尘、放射性物质接触史，无不洁性生活史。 婚姻史：离婚，有1子。 月经史、生育史：153-5/28-302024-10-06 家族史：父亲因“恶性肿瘤”去世（具体不详）；母亲体健，1妹，体健，无与患者同样 疾病。家族中无结核、肝炎、性病等传染性疾病。无糖尿病、血友病等家族性遗传性疾病。 体格检查 T:℃ P:次/分 R:次/分 BP:/mmHg 发育正常，营养良好，自主体位，表情自如，神志清楚，对答正确，反应灵敏，查体合 作。皮肤无紫绀、黄染、苍白，无蜘蛛痣，无瘀点瘀斑，皮肤弹性正常。毛发分布正常，全身 浅表淋巴结未触及肿大，头颅无畸形，双侧眼睑无浮肿，双侧结膜未见异常，巩膜无黄染，瞳 孔正圆等大，对光反射灵敏，双侧耳廓未见异常，双侧外耳道无分泌物，双侧乳突未及压痛， 鼻翼无扇动，双侧鼻腔未见异常，双侧副鼻窦区无压痛，口唇未见异常，牙龈未见异常，伸舌 居中，口腔黏膜无溃疡，咽部无充血，双侧扁桃体未见肿大，扁桃体表面未见脓性分泌物。颈 部对称，双侧颈静脉无怒张，动脉无异常搏动，肝颈静脉回流征阴性，无颈项强直，气管居 中，双侧甲状腺不大。胸廓对称无畸形，双侧呼吸动度一致。双侧语颤均等无减弱，双侧未及 胸膜摩擦感，双侧肺叩诊清音。肺肝相对浊音界位于右锁骨中线第五肋间，双侧肺呼吸音清 晰，未闻及干湿啰音。心前区无隆起，心尖搏动不明显，无弥散，未触及震颤，无心包摩擦 感，心界不大，心率次/分，律规整，无额外心音，无奔马律，P2(A2,各瓣膜听诊区未闻及 杂音，周围血管征未见异常。腹部平坦，未见胃型，未见肠型，未见蠕动波，腹式呼吸正常， 第1页"
    ]
    
    print("=== BERT分词工具示例 ===")
    print("使用--report参数直接输入文本进行分词")
    print()
    
    for text in test_texts:
        print(f"测试文本: {text}")
        print("分词结果:")
        
        # 使用命令行调用bert_tokenizer.py
        cmd = ["python", "bert_tokenizer.py", "--report", text]
        try:
            result = subprocess.run(cmd, capture_output=True, text=True, cwd="/mnt/windows/wy/ner-bert-crf/utils")
            if result.returncode == 0:
                print(result.stdout)
            else:
                print(f"错误: {result.stderr}")
        except Exception as e:
            print(f"执行命令时出错: {e}")
        
        print("-" * 50)

if __name__ == "__main__":
    main()